{% extends "base.html" %}

{% block title %}停车记录 - 凉心智慧停车系统{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="/static/css/we.css">
    <link rel="stylesheet" type="text/css" href="/static/css/vehicle_history.css">
    <style>
        /* 可以在这里添加额外的内联样式 */
    </style>
{% endblock %}

{% block content %}
    <div class="profile-container">
        <div class="profile-actions">
            <a href="/we/" class="back-button">
                <i class="fas fa-arrow-left"></i> 返回个人中心
            </a>
        </div>

        <div class="profile-header">
            <h1><i class="fas fa-history"></i> 停车记录</h1>
            <p class="subtitle">查看您的历史停车信息</p>
        </div>

<div class="vehicle-list-container">
    {% if vehicles %}
        <div class="list-header">
            <div>订单号</div>
            <div>车牌号</div>
            <div>车辆类型</div>
            <div>入场时间</div>
            <div>出场时间</div>
            <div>支付金额</div>
        </div>

        <div class="vehicle-list">
            {% for vehicle in vehicles %}
                <div class="vehicle-card">
                     <div class="order-number">
                            {{ vehicle.order_number|default:"系统生成中..." }}
                     </div>
                    <div class="license-plate">
                        <i class="fas fa-car"></i> {{ vehicle.license_plate }}
                    </div>
                    <div class="vehicle-type">
                        {{ vehicle.vehicle_type_chinese }}
                    </div>
                    <div class="entry-time">
                        <i class="fas fa-sign-in-alt"></i> {{ vehicle.entry_time|date:"Y-m-d H:i" }}
                    </div>
                    <div class="exit-time">
                        {% if vehicle.exit_time %}
                            <i class="fas fa-sign-out-alt"></i> {{ vehicle.exit_time|date:"Y-m-d H:i" }}
                        {% else %}
                            <span class="still-parking"><i class="fas fa-parking"></i> 未出场</span>
                        {% endif %}
                    </div>
                    <div class="payment-amount {% if vehicle.paid %}paid{% else %}unpaid{% endif %}">
                        {% if vehicle.paid %}
                            <i class="fas fa-check-circle"></i> {{ vehicle.payment_amount|default:"0.00" }}元
                        {% else %}
                            <i class="fas fa-times-circle"></i> 未支付
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-records">
            <i class="fas fa-info-circle"></i>
            <p>暂无停车记录</p>
        </div>
    {% endif %}
</div>
    </div>

    <a href="#" class="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </a>
{% endblock %}

{% block extra_js %}
    <script src="/static/js/vehicle_history.js"></script>
{% endblock %}